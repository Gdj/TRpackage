<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>

<style>
  input:valid { background-color: palegreen; }      /* 유효할때 */
  input:invalid { background-color: lightpink; }    /* 유효하지 않을때 */
  input:placeholder-shown:invalid { background-color: transparent;  } /* placeholder가 있고 유효하지 않을때 */
</style>
<label for="trp-tel">전화번호 (일반/휴대전화):</label>
<input type="tel" id="trp-tel" class="trp_tel"
  pattern="^0\d{1,2}-?\d{3,4}-?\d{4}$"
  maxlength="13"
  placeholder="010-1234-5678 또는 02-1234-5678"
  title="일반전화 또는 휴대전화번호를 입력해주세요" required>

<script>
  document.getElementById('trp-tel').addEventListener('input', function (e) {
    let value = e.target.value.replace(/\D/g, ''); // 숫자만 추출
    let formatted = '';

    // 입력 없으면 초기화
    if (!value) {
      e.target.value = '';
      return;
    }

    // --- 서울 (02) ---
    if (value.startsWith('02')) {
      if (value.length <= 2) {
        formatted = value;
      } else if (value.length <= 5) { // 02-123
        formatted = value.replace(/(\d{2})(\d{1,3})/, '$1-$2');
      } else if (value.length <= 9) { // 02-123-4567
        formatted = value.replace(/(\d{2})(\d{3})(\d{1,4})/, '$1-$2-$3');
      } else { // 02-1234-5678
        formatted = value.replace(/(\d{2})(\d{4})(\d{1,4})/, '$1-$2-$3');
      }
    }
    // --- 휴대폰, 지역번호(3자리), 인터넷전화(070 등) ---
    else {
      if (value.length <= 3) {
        formatted = value;
      } else if (value.length <= 6) { // 010-123
        formatted = value.replace(/(\d{3})(\d{1,3})/, '$1-$2');
      } else if (value.length <= 10) { // 010-123-4567
        formatted = value.replace(/(\d{3})(\d{3})(\d{1,4})/, '$1-$2-$3');
      } else { // 010-1234-5678
        formatted = value.replace(/(\d{3})(\d{4})(\d{1,4})/, '$1-$2-$3');
      }
    }

    e.target.value = formatted;
  });
</script>


</body>
</html>